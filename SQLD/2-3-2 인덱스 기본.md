# 2-3-2 인덱스 기본



# **1. 인덱스 특징과 종류**

\- 인덱스는 원하는 데이터를 쉽게 찾을 수 있도록 도와주고, 검색 성능 최적화를 목적으로 한다

**가. 트리 기반 인덱스**

\- DBMS에서 가장 일반적인 인덱스는 B-트리 인덱스

\- 인덱스 데이터는 인덱스를 구성하는 컬럼의 값으로 정렬

**나. SQL Server의 클러스터형 인덱스**

\- 인덱스의 리프 페이지는 데이터 페이지이다(인덱스 키 컬럼과 나머지 컬럼을 리프 페이지에 같이 저장하기 때문에 테이블을 랜덤 엑세스 할 필요가 없다)

\- 프 페이지의 모든 로우(데이터)는 인덱스 키 칼럼 순서로 물리적 정렬 되어 저장된다



# **2. 전체 테이블 스캔과 인덱스 스캔**

**가. 전체 테이블 스캔**

\- 테이블에 존재하는 모든 데이터를 읽어가면서 조건에 맞는 결과를 추출하는 방식

\- 옵티마이저가 Full Table Scan을 연산으로 선택하는 이유 4가지

1) SQL문에 조건이 존재하지 않는 경우

2) SQL문의 주어진 조건에 사용 가능한 인덱스가 존재하지 않는 경우

3) 옵티마이저의 취사 선택(결과 추출을 위해 테이블 대부분에 액세스해야 한다고 판단하는 경우)

4) 그 밖의 경우(병럴처리 방식으로 처리하는 경우, 전체 테이블 스캔 방식의 힌트를 사용한 경우 등)

**나. 인덱스 스캔**

\- 인덱스를 구성하는 컬럼의 값을 기준으로 데이터를 추출하는 액세스 기법

\- 인덱스의 리프 블록은 인덱스를 구성하는 컬럼과 레코드 식별자로 구성되어 있기 때문에 검색을 위해 인덱스 리프 블록을 읽으면 인덱스 구성 컬럼의 값과 테이블 레코트 식별자를 알 수 있다

\- 인덱스 스캔 기법 3가지

1) 인덱스 유일 스캔(Index Unique Scan) : 유일 인덱스를 사용하여 단 하나의 데이터를 추출하는 방식

2) 인덱스 범위 스캔(Index Range Scan) : 인덱스를 이용하여 한 건 이상의 데이터를 추출하는 방식

3) 인덱스 역순 범위 스캔(Index Range Scan Descending) : 인덱스의 리프 블럭의 양방향 링크를 이용하여 내림차순으로 데이터를 읽는 방식(최대값을 쉽게 찾을 수 있음)

**다. Full Table Scan vs Index Scan**

\- 인덱스 스캔 : 인덱스에 존재하는 레코드 식별자를 이용해서 검색하는 데이터의 정확한 위치에서 데이터를 읽는다. 따라서 불필요하게 다른 블록을 읽을 필요가 없다

\- 전체 테이블 스캔 : 테이블 내 모든 데이터를 읽으면서 원하는 데이터를 찾아야 하기 때문에 비효율적인 검색
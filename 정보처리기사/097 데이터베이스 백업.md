

# [정보처리기사 097] - 데이터베이스 백업



# **# 데이터베이스 백업**

**[개요]**

· 전산 장비 장애에 대비하여 DB에 저장된 데이터를 보호하고 복구하기 위한 잡업

· 치명적인 데이터 손실을 막기 위해 DB를 정기적으로 백업

· DBMS는 DB 파괴 및 실행 중단 발생 시 이를 복구할 수 있는 기능 제공



**[DB 장애 유형]**

· 백업 전략 수립을 위해 DB 장애 유형을 정확히 파악해야 한다.

· **사용자** **실수** : 사용자 실수로 인해 테이블이 삭제되거나 잘못된 트랜잭션이 처리된 경우

· **미디어** **장애** : CPU, 메모리, 디스크 등 HD 장애나 데이터가 파손된 경우

· **구문** **장애** : 프로그램 오류나 사용 공간의 부족으로 인해 발생하는 장애

· **사용자** **프로세스** **장애** : 프로그램 비정상 종료나 네트워크 이상으로 세션이 종료되어 발생하는 오류

· **인스턴스** **장애** : HW 장애, 정전, 시스템 파일 파손 등 비정상적인 요인으로 인해 메모리나 DB 서버의 프로세스가 중단된 경우



**[로그 파일]**

· DB의 처리 내용이나 이용 상황 등 상태 변화를 시간 흐름에 따라 모두 기록한 파일

· DB 복구를 위해 필요한 가장 기본적인 자료

· 로그 파일 내용 : 트랜잭션이 작업한 모든 내용, 트랜잭션 식별, 트랜잭션 레코드, 데이터 식별자, 갱신 이전/이후 값 등

· 로그 파일을 기반으로 DB를 과거 상태로 복귀(UNDO)시키거나 현재 상태로 재생(REDO)시켜 DB 상태를 일관성 있게 유지한다.

· 로그 파일은 트랜잭션의 시작 시점, Rollback 시점, 데이터 입력/수정/삭제 시점 등에서 기록된다.



**[DB 복구 알고리즘]**

| **NO-UNDO****REDO**    | DB 버퍼 내용을 비동기적으로 갱신한 경우의 복구 알고리즘· NO-UNDO : 트랜잭션 완료 전에는 변경 내용이 DB에 기록되지 않으므로 취소할 필요 없음· REDO : 트랜잭션 완료 후 DB 버퍼에는 기록되어 있고, 저장매체에는 기록되지 않았으므로 트랜잭션 내용을 다시 실행 |
| ---------------------- | ------------------------------------------------------------ |
| **UNDO****NO-REDO**    | DB 버퍼 내용을 동기적으로 갱신한 경우의 복구 알고리즘· UNDO : 트랜잭션 완료 전에 시스템이 파손되었다면 변경된 내용을 취소· NO-REDO : 트랜잭션 완료 전 DB 버퍼 내용을 이미 저장 매체에 기록했으므로, 트랜잭션 내용을 다시 실행할 필요가 없음 |
| **UNDO****REDO**       | DB 버퍼 내용을 동기/비동기적으로 갱신한 경우의 복구 알고리즘DB 기록 전에 트랜잭션이 완료될 수 있으므로 완료된 트랜잭션이 DB에 기록되지 못했다면 다시 실행 |
| **NO-UNDO****NO-REDO** | DB 버퍼 내용을 동기적으로 저장 매체에 기록하지만, DB와는 다른 영역에 기록한 경우의 복구 알고리즘· NO-UNDO : 변경 내용은 DB와 다른 영역에 기록되어 있으므로 취소할 필요 없음· NO-REDO : 다른 영역에 이미 기록되어 있으므로 트랜잭션 다시 실행할 필요 없음 |



**[백업 종류]**

· **물리 백업**

​    \- 운영체제를 이용해 DB 파일을 백업하는 방법

​    \- 백업 속도가 빠르고 작업이 단순하지만, 문제 발생 시 원인 파악 및 문제 해결이 안됨

· **논리 백업**

​    \- DBMS 유틸리티를 이용해 DB 내의 논리 객체들을 백업하는 방법

​    \- 복원 시 데이터 손상을 막고 문제 발생 시 원인 파악 및 해결이 수월하지만, 백업/복원 시 시간이 많이 소요된다.

| **구분**            | **설명**            | **복구 수준** |
| ------------------- | ------------------- | ------------- |
| **물리 백업**       | 로그 파일 백업 실시 | 완전 복구     |
| 로그 파일 백업 없음 | 백업 시점까지 복구  |               |
| **논리 백업**       | DBMS 유틸리티       |               |